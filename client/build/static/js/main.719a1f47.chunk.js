(this["webpackJsonpecommerce-front"]=this["webpackJsonpecommerce-front"]||[]).push([[0],{35:function(e,t,c){},47:function(e,t,c){},63:function(e,t,c){"use strict";c.r(t);var n=c(1),r=c.n(n),a=c(24),s=c.n(a),o=(c(35),function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,64)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;c(e),n(e),r(e),a(e),s(e)}))}),i=c(4),l=c(6),d=c(8),j=c(2),u=c(3),b="http://localhost:8000/api",m=function(){return"undefined"!=typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")))},h=c(15),O=c(16),p=c(0),f=function(e,t){return e.location.pathname===t?{color:"#ff9900"}:{color:"#ffffff"}},x=Object(l.g)((function(e){var t=e.history;return Object(p.jsx)("div",{children:Object(p.jsxs)("ul",{className:"nav nav-tabs bg-primary",children:[Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(i.b,{className:"nav-link",to:"/",style:f(t,"/"),children:"Home"})}),Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(i.b,{className:"nav-link",to:"/shop",style:f(t,"/shop"),children:"Shop"})}),Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsxs)(i.b,{className:"nav-link",style:f(t,"/cart"),to:"/cart",children:[Object(p.jsx)(h.a,{icon:O.b})," "," ",Object(p.jsx)("sup",{children:Object(p.jsx)("small",{className:"cart-badge",children:"undefined"!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")).length:0})})]})}),m()&&0===m().user.role&&Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(i.b,{className:"nav-link",to:"/user/dashboard",style:f(t,"/user/dashboard"),children:"Dashboard"})}),m()&&1===m().user.role&&Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(i.b,{className:"nav-link",to:"/admin/dashboard",style:f(t,"/admin/dashboard"),children:"Dashboard"})}),!m()&&Object(p.jsxs)(n.Fragment,{children:[Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(i.b,{className:"nav-link",to:"/signin",style:f(t,"/signin"),children:"SignIn"})}),Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(i.b,{className:"nav-link",to:"/signup",style:f(t,"/signup"),children:"SignUp"})})]}),m&&Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)("span",{className:"nav-link",onClick:function(){return function(e){if("undefined"!==typeof window)return localStorage.removeItem("jwt"),e(),fetch("".concat(b,"/signout"),{method:"GET"}).then((function(e){console.log("SignOut",e)})).catch((function(e){console.log("Error")}))}((function(){t.push("/")}))},style:{cursor:"pointer",color:"#ffffff"},children:"SignOut"})})]})})}));c(47);function g(e){var t=e.title,c=void 0===t?"Title":t,n=e.description,r=void 0===n?"Description":n,a=e.className,s=e.children;return Object(p.jsxs)("div",{children:[Object(p.jsx)(x,{}),Object(p.jsxs)("div",{className:"jumbotron",children:[Object(p.jsx)("h2",{children:c}),Object(p.jsx)("p",{className:"lead",children:r})]}),Object(p.jsx)("div",{className:a,children:s})]})}var N=function(){var e=Object(n.useState)({name:"",email:"",password:"",error:"",success:!1}),t=Object(u.a)(e,2),c=t[0],r=t[1],a=c.name,s=c.email,o=c.password,l=c.success,m=c.error,h=function(e){return function(t){r(Object(j.a)(Object(j.a)({},c),{},Object(d.a)({error:!1},e,t.target.value)))}},O=function(e){var t;e.preventDefault(),r(Object(j.a)(Object(j.a)({},c),{},{error:!1})),(t={name:a,email:s,password:o},fetch("".concat(b,"/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))).then((function(e){e.error?r(Object(j.a)(Object(j.a)({},c),{},{error:e.error,success:!1})):r(Object(j.a)(Object(j.a)({},c),{},{name:"",email:"",password:"",error:"",success:!0}))}))};return Object(p.jsxs)(g,{title:"Sign Out",description:"Sign out Node React E-commerce App",className:"container col-md-8 offset-md-2",children:[Object(p.jsxs)("div",{className:"alert alert-info",style:{display:l?"":"none"},children:["New account is created. Please.",Object(p.jsx)(i.b,{to:"/signin",children:"SignIn"})]}),Object(p.jsx)("div",{className:"alert alert-danger",style:{display:m?"":"none"},children:m}),Object(p.jsxs)("form",{children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"text-muted",children:"Name"}),Object(p.jsx)("input",{onChange:h("name"),type:"text",className:"form-control",value:a})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"text-muted",children:"Email"}),Object(p.jsx)("input",{onChange:h("email"),type:"email",className:"form-control",value:s})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"text-muted",children:"Password"}),Object(p.jsx)("input",{onChange:h("password"),type:"password",className:"form-control",value:o})]}),Object(p.jsx)("button",{onClick:O,className:"btn btn-primary",children:"Submit"})]})]})},v=function(){var e=Object(n.useState)({email:"dean@gmail.com",password:"dean@123",error:"",loading:!1,redirectToReferrer:!1}),t=Object(u.a)(e,2),c=t[0],r=t[1],a=c.email,s=c.password,o=c.loading,i=c.error,h=c.redirectToReferrer,O=m().user,f=function(e){return function(t){r(Object(j.a)(Object(j.a)({},c),{},Object(d.a)({error:!1},e,t.target.value)))}},x=function(e){e.preventDefault(),r(Object(j.a)(Object(j.a)({},c),{},{error:!1,loading:!0})),function(e){return fetch("".concat(b,"/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}({email:a,password:s}).then((function(e){e.error?r(Object(j.a)(Object(j.a)({},c),{},{error:e.error,loading:!1})):function(e,t){"undefined"!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),t())}(e,(function(){r(Object(j.a)(Object(j.a)({},c),{},{redirectToReferrer:!0}))}))}))};return Object(p.jsxs)(g,{title:"SignIn",description:"Signin Node React E-commerce App",children:[o&&Object(p.jsx)("div",{className:"alert alert-info",children:Object(p.jsx)("h2",{children:"Loading..."})}),Object(p.jsx)("div",{className:"alert alert-danger",style:{display:i?"":"none"},children:i}),Object(p.jsxs)("form",{children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"text-muted",children:"Email"}),Object(p.jsx)("input",{onChange:f("email"),type:"email",className:"form-control",value:a})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"text-muted",children:"Password"}),Object(p.jsx)("input",{onChange:f("password"),type:"password",className:"form-control",value:s})]}),Object(p.jsx)("button",{onClick:x,className:"btn btn-primary",children:"Submit"})]}),function(){if(h)return O&&1===O.role?Object(p.jsx)(l.a,{to:"/admin/dashboard"}):Object(p.jsx)(l.a,{to:"/user/dashboard"})}()]})},y=c(29),S=c.n(y),w=function(e){return fetch("".concat(b,"/products?sortBy=").concat(e,"&order=desc&limit=6"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},C=function(){return fetch("".concat(b,"/categories"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},P=function(e,t){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={limit:t,skip:e,filters:c};return fetch("".concat(b,"/products/by/search"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))},T=function(e){var t=e.item,c=e.url;return Object(p.jsx)("div",{className:"product-img",children:Object(p.jsx)("img",{src:"".concat(b,"/").concat(c,"/photo/").concat(t._id),alt:t.name,className:"mb-3",style:{maxHeight:"100%",maxWidth:"100%"}})})},k=c(13),A=c.n(k),I=function(e){var t,c=e.product,r=e.showViewProductButton,a=void 0===r||r,s=e.showAddToCartButton,o=void 0===s||s,d=e.cartUpdate,b=void 0!==d&&d,m=e.showRemoveProductButton,f=void 0!==m&&m,x=e.setRun,g=void 0===x?function(e){return e}:x,N=e.run,v=void 0===N?void 0:N,y=Object(n.useState)(!1),S=Object(u.a)(y,2),w=S[0],C=S[1],P=Object(n.useState)(c.count),k=Object(u.a)(P,2),I=k[0],_=k[1],E=function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e},c=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(c=JSON.parse(localStorage.getItem("cart"))),c.push(Object(j.a)(Object(j.a)({},e),{},{count:1})),c=Array.from(new Set(c.map((function(e){return e._id})))).map((function(e){return c.find((function(t){return t._id===e}))})),localStorage.setItem("cart",JSON.stringify(c)),t())}(c,C(!0))},D=function(e){return function(t){g(!v),_(t.target.value<1?1:t.target.value),t.target.value>=1&&function(e,t){var c=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(c=JSON.parse(localStorage.getItem("cart"))),c.map((function(n,r){n._id===e&&(c[r].count=t)})),localStorage.setItem("cart",JSON.stringify(c)))}(e,t.target.value)}};return Object(p.jsxs)("div",{className:"card ",children:[Object(p.jsx)("div",{className:"card-header card-header-1 ",children:c.name}),Object(p.jsxs)("div",{className:"card-body",children:[function(e){if(e)return Object(p.jsx)(l.a,{to:"/cart"})}(w),Object(p.jsx)(T,{item:c,url:"product"}),Object(p.jsxs)("p",{className:"card-p  mt-2",children:[c.description.substring(0,100)," "]}),Object(p.jsxs)("p",{className:"card-p black-10",children:[Object(p.jsx)(h.a,{icon:O.a})," ",c.price]}),Object(p.jsxs)("p",{className:"black-9",children:["Category: ",c.category&&c.category.name]}),Object(p.jsxs)("p",{className:"black-8",children:["Added on ",A()(c.createdAt).fromNow()]}),(t=c.quantity,Object(p.jsx)("div",{children:t>0?Object(p.jsx)("p",{style:{backgroundColor:"blue"},children:"In Stock"}):Object(p.jsx)("p",{style:{backgroundColor:"blue"},children:"Out of Stock"})})),Object(p.jsx)("br",{}),function(e){return e&&Object(p.jsx)(i.b,{to:"/product/".concat(c._id),className:"mr-2",children:Object(p.jsx)("button",{className:"btn btn-outline-primary mt-2 mb-2 card-btn-1",children:"View Product"})})}(a),function(e){return e&&Object(p.jsx)("button",{onClick:E,className:"btn btn-outline-warning mt-2 mb-2 card-btn-1  ",children:"Add to cart"})}(o),function(e){return e&&Object(p.jsx)("button",{onClick:function(){!function(e){var t=[];"undefined"!==typeof window&&(localStorage.getItem("cart")&&(t=JSON.parse(localStorage.getItem("cart"))),t.map((function(c,n){c._id===e&&t.splice(n,1)})),localStorage.setItem("cart",JSON.stringify(t)))}(c._id),g(!v)},className:"btn btn-outline-danger mt-2 mb-2",children:"Remove Product"})}(f),function(e){return e&&Object(p.jsx)("div",{children:Object(p.jsxs)("div",{className:"input-group mb-3",children:[Object(p.jsx)("div",{className:"input-group-prepend",children:Object(p.jsx)("span",{className:"input-group-text",children:"Adjust Quantity"})}),Object(p.jsx)("input",{type:"number",className:"form-control",value:I,onChange:D(c._id)})]})})}(b)]})]})},_=function(){var e=Object(n.useState)({categories:[],category:"",search:"",results:[],searched:!1}),t=Object(u.a)(e,2),c=t[0],r=t[1],a=c.categories,s=c.category,o=c.search,i=c.results,l=c.searched;Object(n.useEffect)((function(){C().then((function(e){e.error?console.log(e.error):r(Object(j.a)(Object(j.a)({},e),{},{categories:e}))}))}),[]);var m=function(){o&&function(e){var t=S.a.stringify(e);return console.log("query",t),fetch("".concat(b,"/products/search?").concat(t),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}({search:o||void 0,category:s}).then((function(e){e.error?console.log(e.error):r(Object(j.a)(Object(j.a)({},c),{},{results:e,searched:!0}))}))},h=function(e){e.preventDefault(),m()},O=function(e){return function(t){var n;r(Object(j.a)(Object(j.a)({},c),{},(n={},Object(d.a)(n,e,t.target.value),Object(d.a)(n,"searched",!1),n)))}},f=function(e,t){return e&&t.length>0?"Found ".concat(t.length," products"):e&&t.length<1?"No products found":void 0};return Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("div",{className:"container mb-3",children:Object(p.jsx)("form",{onSubmit:h,children:Object(p.jsxs)("span",{className:"input-group-text",children:[Object(p.jsxs)("div",{className:"input-group input-group-lg",children:[Object(p.jsx)("div",{className:"input-group-prepend",children:Object(p.jsxs)("select",{className:"btn mr-2",onChange:O("category"),children:[Object(p.jsx)("option",{value:"All",children:"All"}),a.map((function(e,t){return Object(p.jsx)("option",{value:e._id,children:e.name},t)}))]})}),Object(p.jsx)("input",{type:"search",className:"form-control",onChange:O("search"),placeholder:"Search by name"})]}),Object(p.jsx)("div",{className:"btn input-group-append",style:{border:"none"},children:Object(p.jsx)("button",{className:"input-group-text",children:"Search"})})]})})}),Object(p.jsx)("div",{className:"container-fluid mb-3",children:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{className:"mt-4 mb-4",children:f(l,e)}),Object(p.jsx)("div",{className:"row",children:e.map((function(e,t){return Object(p.jsx)("div",{className:"col-4 mb-3",children:Object(p.jsx)(I,{product:e},t)})}))})]})}(i)})]})};function E(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)([]),s=Object(u.a)(a,2),o=s[0],i=s[1],l=Object(n.useState)(!1),d=Object(u.a)(l,2),j=(d[0],d[1]);Object(n.useEffect)((function(){m(),b()}),[]);var b=function(){w("sold").then((function(e){e.error?j(e.error):r(e)}))},m=function(){w("createdAt").then((function(e){console.log(e),e.error?j(e.error):i(e)}))};return Object(p.jsxs)(g,{title:"FullStack React Node MongoDB Ecommerce App",description:"Node React E-commerce App",className:"container-fluid",children:[Object(p.jsx)(_,{}),Object(p.jsx)("h2",{className:"mb-4",children:"New Arrivals"}),Object(p.jsx)("div",{className:"row",children:o.map((function(e,t){return Object(p.jsx)("div",{className:"col-4 mb-3",children:Object(p.jsx)(I,{product:e})},t)}))}),Object(p.jsx)("h2",{className:"mb-4",children:"Best Sellers"}),Object(p.jsx)("div",{className:"row",children:c.map((function(e,t){return Object(p.jsx)("div",{className:"col-4 mb-3",children:Object(p.jsx)(I,{product:e})},t)}))})]})}var D=c(22);function B(e){var t=e.component,c=Object(D.a)(e,["component"]);return Object(p.jsx)(l.b,Object(j.a)(Object(j.a)({},c),{},{render:function(e){return m()?Object(p.jsx)(t,Object(j.a)({},e)):Object(p.jsx)(l.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))}var J=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),c=t[0],r=t[1],a=m().user,s=a._id,o=a.name,l=a.email,d=a.role,j=m().token,h=function(e,t){(function(e,t){return fetch("".concat(b,"/orders/by/user/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,t).then((function(e){e.error?console.log(e.error):r(e)}))};Object(n.useEffect)((function(){h(s,j)}),[]);return Object(p.jsxs)(g,{title:"Dashboard",description:"G'day ".concat(o,"!"),className:"container-fluid",children:[Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("div",{className:"col-3",children:Object(p.jsxs)("div",{className:"card",children:[Object(p.jsx)("h4",{className:"card-header",children:"User Links"}),Object(p.jsxs)("ul",{className:"list-group",children:[Object(p.jsx)("li",{className:"list-group-item",children:Object(p.jsx)(i.b,{className:"nav-link",to:"/cart",children:"My Cart"})}),Object(p.jsx)("li",{className:"list-group-item",children:Object(p.jsx)(i.b,{className:"nav-link",to:"/profile/".concat(s),children:"Update Profile"})})]})]})}),Object(p.jsxs)("div",{className:"col-9",children:[Object(p.jsxs)("div",{className:"card mb-5",children:[Object(p.jsx)("h3",{className:"card-header",children:"User Information"}),Object(p.jsxs)("ul",{className:"list-group",children:[Object(p.jsx)("li",{className:"list-group-item",children:o}),Object(p.jsx)("li",{className:"list-group-item",children:l}),Object(p.jsx)("li",{className:"list-group-item",children:1===d?"Admin":"Registered User"})]})]}),function(e){return Object(p.jsxs)("div",{className:"card mb-5",children:[Object(p.jsx)("h3",{className:"card-header",children:"Purchase history"}),Object(p.jsx)("ul",{className:"list-group",children:Object(p.jsx)("li",{className:"list-group-item",children:e.map((function(e,t){return Object(p.jsxs)("div",{children:[Object(p.jsx)("hr",{}),e.products.map((function(e,t){return Object(p.jsxs)("div",{children:[Object(p.jsxs)("h6",{children:["Product name: ",e.name]}),Object(p.jsxs)("h6",{children:["Product price: $",e.price]}),Object(p.jsxs)("h6",{children:["Purchased date:"," ",A()(e.createdAt).fromNow()]})]},t)}))]})}))})})]})}(c)]})]}),Object(p.jsxs)("div",{className:"card",children:[Object(p.jsx)("h3",{className:"card-header",children:"Purchase History"}),Object(p.jsx)("ul",{className:"list-group",children:Object(p.jsx)("li",{className:"list-group-item",children:"History"})})]})]})};function G(){var e=m().user,t=(e._id,e.name),c=e.email,n=e.role;return Object(p.jsx)(g,{title:"Dashboard",description:"G'day ".concat(t,"!"),className:"container-fluid",children:Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("div",{className:"col-3",children:Object(p.jsxs)("div",{className:"card",children:[Object(p.jsx)("h4",{className:"card-header",children:"Admin Links"}),Object(p.jsxs)("ul",{className:"list-group",children:[Object(p.jsx)("li",{className:"list-group-item",children:Object(p.jsx)(i.b,{className:"nav-link",to:"/create/category",children:"Create Category"})}),Object(p.jsx)("li",{className:"list-group-item",children:Object(p.jsx)(i.b,{className:"nav-link",to:"/create/product",children:"Create Product"})}),Object(p.jsx)("li",{className:"list-group-item",children:Object(p.jsx)(i.b,{className:"nav-link",to:"/admin/orders",children:"View Orders"})}),Object(p.jsx)("li",{className:"list-group-item",children:Object(p.jsx)(i.b,{className:"nav-link",to:"/admin/products",children:"Manage Products"})})]})]})}),Object(p.jsx)("div",{className:"col-9",children:Object(p.jsxs)("div",{className:"card mb-5",children:[Object(p.jsx)("h3",{className:"card-header",children:"User Information"}),Object(p.jsxs)("ul",{className:"list-group",children:[Object(p.jsx)("li",{className:"list-group-item",children:t}),Object(p.jsx)("li",{className:"list-group-item",children:c}),Object(p.jsx)("li",{className:"list-group-item",children:1===n?"Admin":"Registered User"})]})]})})]})})}var U=function(e){var t=e.component,c=Object(D.a)(e,["component"]);return Object(p.jsx)(l.b,Object(j.a)(Object(j.a)({},c),{},{render:function(e){return m()&&1===m().user.role?Object(p.jsx)(t,Object(j.a)({},e)):Object(p.jsx)(l.a,{to:{pathname:"/",state:{from:e.location}}})}}))},z=function(){return fetch("".concat(b,"/categories"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},R=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)(!1),s=Object(u.a)(a,2),o=s[0],l=s[1],d=Object(n.useState)(!1),j=Object(u.a)(d,2),h=j[0],O=j[1],f=m(),x=f.user,N=f.token,v=function(e){l(""),r(e.target.value)},y=function(e){e.preventDefault(),l(""),O(!1),function(e,t,c){return fetch("".concat(b,"/category/create/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(c)}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}(x._id,N,{name:c}).then((function(e){e.error?l(e.error):(l(""),O(!0))}))};return Object(p.jsx)(g,{title:"Add a new category",description:"G'day ".concat(x.name,", ready to add a new category?"),children:Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)("div",{className:"col-md-8 offset-md-2",children:[function(){if(h)return Object(p.jsxs)("h3",{className:"text-success",children:[c," is created"]})}(),function(){if(o)return Object(p.jsx)("h3",{className:"text-danger",children:"Category should be unique"})}(),Object(p.jsxs)("form",{onSubmit:y,children:[Object(p.jsxs)("div",{className:"form-group mb-3",children:[Object(p.jsx)("label",{className:"text-muted",children:"Name"}),Object(p.jsx)("input",{type:"text",className:"form-control",onChange:v,value:c,autoFocus:!0,required:!0})]}),Object(p.jsx)("button",{className:"btn btn-outline-primary",children:"Create Category"})]}),Object(p.jsx)("div",{className:"mt-5",children:Object(p.jsx)(i.b,{to:"/admin/dashboard",className:"text-warning",children:"Back to Dashboard"})})]})})})},F=function(){var e=Object(n.useState)({name:"",description:"",price:"",categories:[],category:"",shipping:"",quantity:"",photo:"",loading:!1,error:"",createdProduct:"",redirectToProfile:!1,formData:""}),t=Object(u.a)(e,2),c=t[0],r=t[1],a=m(),s=a.user,o=a.token,i=c.name,l=c.description,h=c.price,O=c.categories,f=(c.category,c.shipping,c.quantity),x=c.loading,N=c.error,v=c.createdProduct,y=(c.redirectToProfile,c.formData);Object(n.useEffect)((function(){z().then((function(e){e.error?r(Object(j.a)(Object(j.a)({},c),{},{error:e.error})):r(Object(j.a)(Object(j.a)({},c),{},{categories:e,formData:new FormData}))}))}),[]);var S=function(e){return function(t){var n="photo"===e?t.target.files[0]:t.target.value;y.set(e,n),r(Object(j.a)(Object(j.a)({},c),{},Object(d.a)({},e,n)))}},w=function(e){e.preventDefault(),r(Object(j.a)(Object(j.a)({},c),{},{error:"",loading:!0})),function(e,t,c){return fetch("".concat(b,"/product/create/").concat(e),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)},body:c}).then((function(e){return e.json()})).catch((function(e){console.log(e)}))}(s._id,o,y).then((function(e){e.error?r(Object(j.a)(Object(j.a)({},c),{},{error:e.error})):r(Object(j.a)(Object(j.a)({},c),{},{name:"",description:"",photo:"",price:"",error:"",loading:!1,createdProduct:e.name}))}))};return Object(p.jsx)(g,{title:"Add a new product",description:"G'day ".concat(s.name,", ready to add a new product?"),children:Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)("div",{className:"col-md-8 offset-md-2",children:[x&&Object(p.jsx)("div",{className:"alert alert-success",children:Object(p.jsx)("h2",{children:"Loading..."})}),Object(p.jsx)("div",{className:"alert alert-info",style:{display:v?"":"none"},children:Object(p.jsxs)("h2",{children:["".concat(v)," is created!"]})}),Object(p.jsx)("div",{className:"alert alert-danger",style:{display:N?"":"none"},children:N}),Object(p.jsxs)("form",{className:"mb-3",onSubmit:w,children:[Object(p.jsx)("h4",{children:"Post Photo"}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("label",{className:"btn btn-secondary",children:Object(p.jsx)("input",{onChange:S("photo"),type:"file",name:"photo",accept:"image/*"})})}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"text-muted",children:"Name"}),Object(p.jsx)("input",{onChange:S("name"),type:"text",className:"form-control",value:i})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"text-muted",children:"Description"}),Object(p.jsx)("textarea",{onChange:S("description"),className:"form-control",value:l})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"text-muted",children:"Price"}),Object(p.jsx)("input",{onChange:S("price"),type:"number",className:"form-control",value:h})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"text-muted",children:"Category"}),Object(p.jsxs)("select",{onChange:S("category"),className:"form-control",children:[Object(p.jsx)("option",{children:"Please select"}),O&&O.map((function(e,t){return Object(p.jsx)("option",{value:e._id,children:e.name},t)}))]})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"text-muted",children:"Shipping"}),Object(p.jsxs)("select",{onChange:S("shipping"),className:"form-control",children:[Object(p.jsx)("option",{children:"Please select"}),Object(p.jsx)("option",{value:"0",children:"No"}),Object(p.jsx)("option",{value:"1",children:"Yes"})]})]}),Object(p.jsxs)("div",{className:"form-group mb-3",children:[Object(p.jsx)("label",{className:"text-muted",children:"Quantity"}),Object(p.jsx)("input",{onChange:S("quantity"),type:"number",className:"form-control",value:f})]}),Object(p.jsx)("button",{className:"btn btn-outline-primary",children:"Create Product"})]})]})})})},q=c(18),$=function(e){var t=e.categories,c=e.handleFilters,r=Object(n.useState)([]),a=Object(u.a)(r,2),s=a[0],o=a[1],i=function(e){return function(){var t=s.indexOf(e),n=Object(q.a)(s);-1===t?n.push(e):n.splice(t,1),o(n),c(n)}};return t.map((function(e,t){return Object(p.jsxs)("li",{className:"list-unstyled",children:[Object(p.jsx)("input",{style:{marginRight:10},value:s.indexOf(-1===e._id),onChange:i(e._id),type:"checkbox",className:"form-check-input"}),Object(p.jsx)("label",{className:"form-check-label",children:e.name})]},t)}))},L=[{_id:0,name:"Any",array:[]},{_id:1,name:"$0 to $9",array:[0,9]},{_id:2,name:"$10 to $19",array:[10,19]},{_id:3,name:"$20 to $29",array:[20,29]},{_id:4,name:"$30 to $39",array:[20,29]},{_id:5,name:"More than $40",array:[40,99]}],M=function(e){var t=e.prices,c=e.handleFilters,r=Object(n.useState)(0),a=Object(u.a)(r,2),s=(a[0],a[1]),o=function(e){c(e.target.value),s(e.target.value)};return t.map((function(e,t){return Object(p.jsxs)("div",{children:[Object(p.jsx)("input",{onChange:o,value:"".concat(e._id),name:e,type:"radio",className:"mr-2 ml-4"}),Object(p.jsxs)("label",{className:"form-check-label",children:[e.name," "]})]},t)}))},H=function(){var e=Object(n.useState)({filters:{category:[],price:[]}}),t=Object(u.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)([]),s=Object(u.a)(a,2),o=s[0],i=s[1],l=Object(n.useState)(!1),d=Object(u.a)(l,2),b=(d[0],d[1]),m=Object(n.useState)(6),h=Object(u.a)(m,2),O=h[0],f=(h[1],Object(n.useState)(0)),x=Object(u.a)(f,2),N=x[0],v=x[1],y=Object(n.useState)(0),S=Object(u.a)(y,2),w=S[0],T=S[1],k=Object(n.useState)([]),A=Object(u.a)(k,2),_=A[0],E=A[1],D=function(e,t){var n=Object(j.a)({},c);if(n.filters[t]=e,"price"===t){var a=J(e);n.filters[t]=a}B(c.filters),r(n)},B=function(e){P(N,O,e).then((function(e){e.error?b(e.error):(E(e.data),T(e.size),v(0))}))},J=function(e){var t=L,c=[];for(var n in t)t[n]._id===parseInt(e)&&(c=t[n].array);return c},G=function(){var e=N+O;P(e,O,c.filters).then((function(t){t.error?b(t.error):(E([].concat(Object(q.a)(_),Object(q.a)(t.data))),T(t.size),v(e))}))};return Object(n.useEffect)((function(){C().then((function(e){e.error?b(e.error):i(e)}))}),[]),Object(p.jsx)(g,{title:"Shop Page",description:"Search and find books of your choice",className:"container-fluid",children:Object(p.jsxs)("div",{className:"row",children:[Object(p.jsxs)("div",{className:"col-4",children:[Object(p.jsx)("h4",{children:"Filter by categories"}),Object(p.jsx)("ul",{children:Object(p.jsx)($,{categories:o,handleFilters:function(e){return D(e,"category")}})}),Object(p.jsx)("h4",{children:"Filter by price range"}),Object(p.jsx)("div",{children:Object(p.jsx)(M,{prices:L,handleFilters:function(e){return D(e,"price")}})})]}),Object(p.jsxs)("div",{className:"col-8",children:[Object(p.jsx)("h2",{className:"mb-4",children:"Products"}),Object(p.jsx)("div",{className:"row",children:_.map((function(e,t){return Object(p.jsx)("div",{className:"col-4 mb-3",children:Object(p.jsx)(I,{product:e})},t)}))}),Object(p.jsx)("hr",{}),w>0&&w>=O&&Object(p.jsx)("button",{onClick:G,className:"btn btn-warning mb-5",children:"Load more"})]})]})})},Y=function(e){var t=Object(n.useState)({}),c=Object(u.a)(t,2),r=c[0],a=c[1],s=Object(n.useState)([]),o=Object(u.a)(s,2),i=o[0],l=o[1],d=Object(n.useState)(!1),j=Object(u.a)(d,2),m=(j[0],j[1]),h=function(e){(function(e){return fetch("".concat(b,"/product/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e).then((function(e){e.error?m(e.error):(a(e),function(e){return fetch("".concat(b,"/products/related/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(e._id).then((function(e){e.error?m(e.error):l(e)})))}))};return Object(n.useEffect)((function(){var t=e.match.params.productId;h(t)}),[e]),Object(p.jsx)(g,{title:r&&r.name,description:r&&r.description&&r.description.substring(0,100),className:"container-fluid",children:Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("div",{className:"col-8",children:r&&r.description&&Object(p.jsx)(I,{product:r,showViewProductButton:!1})}),Object(p.jsxs)("div",{className:"col-4",children:[Object(p.jsx)("h4",{children:"Related products"}),i.map((function(e,t){return Object(p.jsx)("div",{className:"mb-3",children:Object(p.jsx)(I,{product:e})},t)}))]})]})})},V=c(30),Q=c.n(V),W=function(e){var t=e.products,c=e.setRun,r=void 0===c?function(e){return e}:c,a=e.run,s=void 0===a?void 0:a,o=Object(n.useState)({loading:!1,success:!1,clientToken:null,error:"",instance:{},address:""}),l=Object(u.a)(o,2),d=l[0],h=l[1],O=m()&&m().user._id,f=m()&&m().token,x=function(e,t){(function(e,t){return fetch("".concat(b,"/braintree/getToken/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,t).then((function(e){e.error?(console.log(e.error),h(Object(j.a)(Object(j.a)({},e),{},{error:e.error}))):(console.log(e),h({clientToken:e.clientToken}))}))};Object(n.useEffect)((function(){x(O,f)}),[]);var g,N,v,y=function(e){h(Object(j.a)(Object(j.a)({},d),{},{address:e.target.value}))},S=function(){return t.reduce((function(e,t){return e+t.count*t.price}),0)},w=d.address,C=function(){h({loading:!0});d.instance.requestPaymentMethod().then((function(e){var c={paymentMethodNonce:e.nonce,amount:S()};(function(e,t,c){return fetch("".concat(b,"/braintree/payment/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(c)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(O,f,c).then((function(e){console.log(e);var c={products:t,transaction_id:e.transaction.id,amount:e.transaction.amount,address:w};(function(e,t,c){return fetch("".concat(b,"/order/create/").concat(e),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({order:c})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(O,f,c).then((function(e){var t;t=function(){r(!s),console.log("payment success and empty cart"),h({loading:!1,success:!0})},"undefined"!==typeof window&&(localStorage.removeItem("cart"),t())})).catch((function(e){console.log(e),h({loading:!1})}))})).catch((function(e){console.log(e),h({loading:!1})}))})).catch((function(e){h(Object(j.a)(Object(j.a)({},d),{},{error:e.message}))}))},P=function(){return Object(p.jsx)("div",{onBlur:function(){return h(Object(j.a)(Object(j.a)({},d),{},{error:""}))},children:null!==d.clientToken&&t.length>0?Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"gorm-group mb-3",children:[Object(p.jsx)("label",{className:"text-muted",children:"Delivery address:"}),Object(p.jsx)("textarea",{onChange:y,className:"form-control",value:d.address,placeholder:"Type your delivery address here..."})]}),Object(p.jsx)(Q.a,{options:{authorization:d.clientToken,googlePay:{flow:"vault"}},onInstance:function(e){return d.instance=e}}),Object(p.jsx)("button",{onClick:C,className:"btn btn-success btn-block",children:"Pay"})]}):null})};return Object(p.jsxs)("div",{children:[Object(p.jsxs)("h2",{children:["Total: $",S()]}),(v=d.loading,v&&Object(p.jsx)("h2",{className:"text-danger",children:"Loading..."})),(N=d.success,Object(p.jsx)("div",{className:"alert alert-info",style:{display:N?"":"none"},children:"Thanks! Your payment was successful!"})),(g=d.error,Object(p.jsx)("div",{className:"alert alert-danger",style:{display:g?"":"none"},children:g})),m()?Object(p.jsx)("div",{children:P()}):Object(p.jsx)(i.b,{to:"/signin",children:Object(p.jsx)("button",{className:"btn btn-primary",children:"Sign in to checkout"})})]})},K=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)(!1),s=Object(u.a)(a,2),o=s[0],l=s[1];Object(n.useEffect)((function(){r("undefined"!==typeof window&&localStorage.getItem("cart")?JSON.parse(localStorage.getItem("cart")):[])}),[o]);return Object(p.jsx)(g,{title:"Shopping Cart",description:"Manage your cart items. Add remove checkout or continue shopping.",className:"container-fluid",children:Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("div",{className:"col-6",children:c.length>0?function(e){return Object(p.jsxs)("div",{children:[Object(p.jsxs)("h2",{children:["Your cart has ","".concat(e.length)," items"]}),Object(p.jsx)("hr",{}),e.map((function(e,t){return Object(p.jsx)(I,{product:e,showAddToCartButton:!1,cartUpdate:!0,showRemoveProductButton:!0,setRun:l,run:o},t)}))]})}(c):Object(p.jsxs)("h2",{children:["Your cart is empty. ",Object(p.jsx)("br",{})," ",Object(p.jsx)(i.b,{to:"/shop",children:"Continue shopping"})]})}),Object(p.jsxs)("div",{className:"col-6",children:[Object(p.jsx)("h2",{className:"mb-4",children:"Your cart summary"}),Object(p.jsx)("hr",{}),Object(p.jsx)(W,{products:c,setRun:l,run:o})]})]})})},X=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),c=t[0],r=t[1],a=Object(n.useState)([]),s=Object(u.a)(a,2),o=s[0],i=s[1],l=m(),d=l.user,j=l.token,h=function(){(function(e,t){return fetch("".concat(b,"/order/list/").concat(e),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(d._id,j).then((function(e){e.error?console.log(e.error):r(e)}))},O=function(){(function(e,t){return fetch("".concat(b,"/order/status-values/").concat(e),{method:"GET",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(d._id,j).then((function(e){e.error?console.log(e.error):i(e)}))};Object(n.useEffect)((function(){h(),O()}),[]);var f=function(e,t){return Object(p.jsxs)("div",{className:"input-group mb-2 mr-sm-2",children:[Object(p.jsx)("div",{className:"input-group-prepend",children:Object(p.jsx)("div",{className:"input-group-text",children:e})}),Object(p.jsx)("input",{type:"text",value:t,className:"form-control",readOnly:!0})]})},x=function(e,t){(function(e,t,c,n){return fetch("".concat(b,"/order/").concat(c,"/status/").concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({status:n,orderId:c})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(d._id,j,t,e.target.value).then((function(e){e.error?console.log("Status update failed"):h()}))},N=function(e){return Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsxs)("h3",{className:"mark mb-4",children:["Status: ",e.status]}),Object(p.jsxs)("select",{className:"form-control",onChange:function(t){return x(t,e._id)},children:[Object(p.jsx)("option",{children:"Update Status"}),o.map((function(e,t){return Object(p.jsx)("option",{value:e,children:e},t)}))]})]})};return Object(p.jsx)(g,{title:"Orders",description:"G'day ".concat(d.name,", you can manage all the orders here"),className:"container-fluid",children:Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)("div",{className:"col-md-8 offset-md-2",children:[c.length>0?Object(p.jsxs)("h1",{className:"text-danger display-2",children:["Total orders: ",c.length]}):Object(p.jsx)("h1",{className:"text-danger",children:"No orders"}),c.map((function(e,t){return Object(p.jsxs)("div",{className:"mt-5",style:{borderBottom:"5px solid indigo"},children:[Object(p.jsx)("h2",{className:"mb-5",children:Object(p.jsxs)("span",{className:"bg-primary",children:["Order ID: ",e._id]})}),Object(p.jsxs)("ul",{className:"list-group mb-2",children:[Object(p.jsx)("li",{className:"list-group-item",children:N(e)}),Object(p.jsxs)("li",{className:"list-group-item",children:["Transaction ID: ",e.transaction_id]}),Object(p.jsxs)("li",{className:"list-group-item",children:["Amount: $",e.amount]}),Object(p.jsxs)("li",{className:"list-group-item",children:["Ordered by: ",e.user.name]}),Object(p.jsxs)("li",{className:"list-group-item",children:["Ordered on:"," ",A()(e.createdAt).fromNow()]}),Object(p.jsxs)("li",{className:"list-group-item",children:["Delivery address: ",e.address]})]}),Object(p.jsxs)("h3",{className:"mt-4 mb-4 font-italic",children:["Total products in the order:"," ",e.products.length]}),e.products.map((function(e,t){return Object(p.jsxs)("div",{className:"mb-4",style:{padding:"20px",border:"1px solid indigo"},children:[f("Product name",e.name),f("Product price",e.price),f("Product total",e.count),f("Product Id",e._id)]},t)}))]},t)}))]})})})},Z=function(e){var t=e.match,c=Object(n.useState)({name:"",email:"",password:"",error:!1,success:!1}),r=Object(u.a)(c,2),a=r[0],s=r[1],o=m().token,i=a.name,h=a.email,O=a.password,f=(a.error,a.success),x=function(e){(function(e,t){return fetch("".concat(b,"/user/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,o).then((function(e){e.error?s(Object(j.a)(Object(j.a)({},a),{},{error:!0})):s(Object(j.a)(Object(j.a)({},a),{},{name:e.name,email:e.email}))}))};Object(n.useEffect)((function(){x(t.params.userId)}),[]);var N=function(e){return function(t){s(Object(j.a)(Object(j.a)({},a),{},Object(d.a)({error:!1},e,t.target.value)))}},v=function(e){e.preventDefault(),function(e,t,c){return fetch("".concat(b,"/user/").concat(e),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify(c)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(t.params.userId,o,{name:i,email:h,password:O}).then((function(e){e.error?alert(e.error):function(e,t){if("undefined"!==typeof window&&localStorage.getItem("jwt")){var c=JSON.parse(localStorage.getItem("jwt"));c.user=e,localStorage.setItem("jwt",JSON.stringify(c)),t()}}(e,(function(){s(Object(j.a)(Object(j.a)({},a),{},{name:e.name,email:e.email,success:!0}))}))}))};return Object(p.jsxs)(g,{title:"Profile",description:"Update your profile",className:"container-fluid",children:[Object(p.jsx)("h2",{className:"mb-4",children:"Profile update"}),function(e,t,c){return Object(p.jsxs)("form",{children:[Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"text-muted",children:"Name"}),Object(p.jsx)("input",{type:"text",onChange:N("name"),className:"form-control",value:e})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"text-muted",children:"Email"}),Object(p.jsx)("input",{type:"email",onChange:N("email"),className:"form-control",value:t})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"text-muted",children:"Password"}),Object(p.jsx)("input",{type:"password",onChange:N("password"),className:"form-control",value:c})]}),Object(p.jsx)("button",{onClick:v,className:"btn btn-primary",children:"Submit"})]})}(i,h,O),function(e){if(e)return Object(p.jsx)(l.a,{to:"/cart"})}(f)]})},ee=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),c=t[0],r=t[1],a=m(),s=a.user,o=a.token,l=function(){fetch("".concat(b,"/products?limit=undefined"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(e){e.error?console.log(e.error):r(e)}))},d=function(e){(function(e,t,c){return fetch("".concat(b,"/product/").concat(e,"/").concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(c)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e,s._id,o).then((function(e){e.error?console.log(e.error):l()}))};return Object(n.useEffect)((function(){l()}),[]),Object(p.jsx)(g,{title:"Manage Products",description:"Perform CRUD on products",className:"container-fluid",children:Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)("div",{className:"col-12",children:[Object(p.jsxs)("h2",{className:"text-center",children:["Total ",c.length," products"]}),Object(p.jsx)("hr",{}),Object(p.jsx)("ul",{className:"list-group",children:c.map((function(e,t){return Object(p.jsxs)("li",{className:"list-group-item d-flex justify-content-between align-items-center",children:[Object(p.jsx)("strong",{children:e.name}),Object(p.jsx)(i.b,{to:"/admin/product/update/".concat(e._id),children:Object(p.jsx)("span",{style:{backgroundColor:"yellow"},className:"badge badge-warning",children:"Update"})}),Object(p.jsx)("span",{style:{backgroundColor:"red"},onClick:function(){return d(e._id)},className:"badge badge-danger badge-pill",children:"Delete"})]},t)}))}),Object(p.jsx)("br",{})]})})})},te=function(e){var t=e.match,c=Object(n.useState)({name:"",description:"",price:"",categories:[],category:"",shipping:"",quantity:"",photo:"",loading:!1,error:!1,createdProduct:"",redirectToProfile:!1,formData:""}),r=Object(u.a)(c,2),a=r[0],s=r[1],o=Object(n.useState)([]),i=Object(u.a)(o,2),h=i[0],O=i[1],f=m(),x=f.user,N=f.token,v=a.name,y=a.description,S=a.price,w=(a.category,a.shipping,a.quantity),C=a.loading,P=a.error,T=a.createdProduct,k=a.redirectToProfile,A=a.formData,I=function(e){(function(e){return fetch("".concat(b,"/product/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e).then((function(e){e.error?s(Object(j.a)(Object(j.a)({},a),{},{error:e.error})):(s(Object(j.a)(Object(j.a)({},a),{},{name:e.name,description:e.description,price:e.price,category:e.category._id,shipping:e.shipping,quantity:e.quantity,formData:new FormData})),_())}))},_=function(){z().then((function(e){e.error?s(Object(j.a)(Object(j.a)({},a),{},{error:e.error})):O(e)}))};Object(n.useEffect)((function(){I(t.params.productId)}),[]);var E=function(e){return function(t){var c="photo"===e?t.target.files[0]:t.target.value;A.set(e,c),s(Object(j.a)(Object(j.a)({},a),{},Object(d.a)({},e,c)))}},D=function(e){e.preventDefault(),s(Object(j.a)(Object(j.a)({},a),{},{error:"",loading:!0})),function(e,t,c,n){return fetch("".concat(b,"/product/").concat(e,"/").concat(t),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(c)},body:n}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(t.params.productId,x._id,N,A).then((function(e){e.error?s(Object(j.a)(Object(j.a)({},a),{},{error:e.error})):s(Object(j.a)(Object(j.a)({},a),{},{name:"",description:"",photo:"",price:"",quantity:"",loading:!1,error:!1,redirectToProfile:!0,createdProduct:e.name}))}))};return Object(p.jsx)(g,{title:"Add a new product",description:"G'day ".concat(x.name,", ready to add a new product?"),children:Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)("div",{className:"col-md-8 offset-md-2",children:[C&&Object(p.jsx)("div",{className:"alert alert-success",children:Object(p.jsx)("h2",{children:"Loading..."})}),Object(p.jsx)("div",{className:"alert alert-info",style:{display:T?"":"none"},children:Object(p.jsxs)("h2",{children:["".concat(T)," is updated!"]})}),Object(p.jsx)("div",{className:"alert alert-danger",style:{display:P?"":"none"},children:P}),Object(p.jsxs)("form",{className:"mb-3",onSubmit:D,children:[Object(p.jsx)("h4",{children:"Post Photo"}),Object(p.jsx)("div",{className:"form-group",children:Object(p.jsx)("label",{className:"btn btn-secondary",children:Object(p.jsx)("input",{onChange:E("photo"),type:"file",name:"photo",accept:"image/*"})})}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"text-muted",children:"Name"}),Object(p.jsx)("input",{onChange:E("name"),type:"text",className:"form-control",value:v})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"text-muted",children:"Description"}),Object(p.jsx)("textarea",{onChange:E("description"),className:"form-control",value:y})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"text-muted",children:"Price"}),Object(p.jsx)("input",{onChange:E("price"),type:"number",className:"form-control",value:S})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"text-muted",children:"Category"}),Object(p.jsxs)("select",{onChange:E("category"),className:"form-control",children:[Object(p.jsx)("option",{children:"Please select"}),h&&h.map((function(e,t){return Object(p.jsx)("option",{value:e._id,children:e.name},t)}))]})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"text-muted",children:"Shipping"}),Object(p.jsxs)("select",{onChange:E("shipping"),className:"form-control",children:[Object(p.jsx)("option",{children:"Please select"}),Object(p.jsx)("option",{value:"0",children:"No"}),Object(p.jsx)("option",{value:"1",children:"Yes"})]})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"text-muted",children:"Quantity"}),Object(p.jsx)("input",{onChange:E("quantity"),type:"number",className:"form-control",value:w})]}),Object(p.jsx)("button",{className:"btn btn-outline-primary",children:"Update Product"})]}),function(){if(k&&!P)return Object(p.jsx)(l.a,{to:"/"})}()]})})})},ce=function(e){var t=e.match,c=Object(n.useState)({name:"",error:"",redirectToProfile:!1,formData:""}),r=Object(u.a)(c,2),a=r[0],s=r[1],o=m(),h=o.user,O=o.token,f=a.name,x=a.error,N=a.redirectToProfile,v=function(e){(function(e){return fetch("".concat(b,"/category/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(e).then((function(e){e.error?s(Object(j.a)(Object(j.a)({},a),{},{error:e.error})):s(Object(j.a)(Object(j.a)({},a),{},{name:e.name}))}))};Object(n.useEffect)((function(){v(t.params.categoryId)}),[]);var y=function(e){return function(t){s(Object(j.a)(Object(j.a)({},a),{},Object(d.a)({error:!1},e,t.target.value)))}},S=function(e){e.preventDefault();var c={name:f};(function(e,t,c,n){return fetch("".concat(b,"/category/").concat(e,"/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer ".concat(c)},body:JSON.stringify(n)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(t.params.categoryId,h._id,O,c).then((function(e){e.error?s(Object(j.a)(Object(j.a)({},a),{},{error:e.error})):s(Object(j.a)(Object(j.a)({},a),{},{name:e.name,error:!1,redirectToProfile:!0}))}))};return Object(p.jsx)(g,{title:"Hi ".concat(h.name),description:"This is Update Product Action Page",className:"container-fluid",children:Object(p.jsx)("div",{className:"row",children:Object(p.jsxs)("div",{className:"col-md-8 offset-md-2 m-b-250 mb-5",children:[Object(p.jsxs)("div",{className:"alert alert-danger",role:"alert",style:{display:x?"":"none"},children:[Object(p.jsx)("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close",children:Object(p.jsx)("span",{"aria-hidden":"true",children:"\xd7"})}),x]}),Object(p.jsx)("div",{className:"wrap-login100 p-l-85 p-r-85 p-t-55 p-b-55",children:Object(p.jsxs)("form",{className:"mb-5",onSubmit:S,children:[Object(p.jsx)("span",{className:"login100-form-title p-b-32 m-b-7",children:"Update Category Form"}),Object(p.jsx)("span",{className:"txt1 p-b-11",children:"Category Name"}),Object(p.jsx)("br",{}),Object(p.jsx)("br",{}),Object(p.jsx)("div",{className:"wrap-input100 validate-input m-b-36",children:Object(p.jsx)("input",{onChange:y("name"),value:f,className:"input100",type:"text",required:!0,name:"name"})}),Object(p.jsx)("div",{className:"w-size25",children:Object(p.jsx)("button",{type:"submit",className:"flex-c-m size2 bg1 bo-rad-23 hov1 m-text3 trans-0-4",children:"Save Changes"})})]})}),Object(p.jsx)("div",{className:"mt-5",children:Object(p.jsx)(i.b,{to:"/admin/categories",className:"text-info",children:"Back To Admin Home"})}),function(){if(N&&!x)return Object(p.jsx)(l.a,{to:"/admin/categories"})}()]})})})};function ne(){return Object(p.jsx)(i.a,{children:Object(p.jsxs)(l.d,{children:[Object(p.jsx)(l.b,{path:"/",exact:!0,component:E}),Object(p.jsx)(l.b,{path:"/signup",exact:!0,component:N}),Object(p.jsx)(l.b,{path:"/signin",exact:!0,component:v}),Object(p.jsx)(l.b,{path:"/shop",exact:!0,component:H}),Object(p.jsx)(l.b,{path:"/product/:productId",exact:!0,component:Y}),Object(p.jsx)(l.b,{path:"/cart",exact:!0,component:K}),Object(p.jsx)(B,{path:"/user/dashboard",exact:!0,component:J}),Object(p.jsx)(B,{path:"/profile/:userId",exact:!0,component:Z}),Object(p.jsx)(B,{path:"/admin/products",exact:!0,component:ee}),Object(p.jsx)(U,{path:"/admin/dashboard",exact:!0,component:G}),Object(p.jsx)(U,{path:"/create/category",exact:!0,component:R}),Object(p.jsx)(U,{path:"/create/product",exact:!0,component:F}),Object(p.jsx)(U,{path:"/admin/orders",exact:!0,component:X}),Object(p.jsx)(U,{path:"/admin/product/update/:productId",exact:!0,component:te}),Object(p.jsx)(U,{path:"/admin/category/update/:categoryId",exact:!0,component:ce})]})})}s.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(ne,{})}),document.getElementById("root")),o()}},[[63,1,2]]]);
//# sourceMappingURL=main.719a1f47.chunk.js.map